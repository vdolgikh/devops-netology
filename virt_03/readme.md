# Домашнее задание к занятию «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»

## Задача 1

Сценарий выполнения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберите любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```

Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

### Ответ

[https://hub.docker.com/r/vdolgikh/nginx](https://hub.docker.com/r/vdolgikh/nginx)

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- высоконагруженное монолитное Java веб-приложение;
- Nodejs веб-приложение;
- мобильное приложение c версиями для Android и iOS;
- шина данных на базе Apache Kafka;
- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;
- мониторинг-стек на базе Prometheus и Grafana;
- MongoDB как основное хранилище данных для Java-приложения;
- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.

### Ответ

1. Высоконагруженное монолитное Java веб-приложение - подойдет любой из вариантов реализации, но на мой взгляд лучше использовать docker в силу легкости использования и миграции.
2. Nodejs веб-приложение - docker или любой другой инструмент контейнеризации. Для обеспечания быстрого развертывания приложения.
3. Мобильное приложение c версиями для Android и iOS - любой из вариантов кроме контейнеризации т.к. речь идет о разработке мобильных приложений с графическим интерфейсом.
4. Шина данных на базе Apache Kafka - если я всё верно понял из поисковой выдачи гугла, то это распределенная система для обработки большого объема данных. Для тестирования использовать docker - нормально. Есть даже готовые образы. Но в случае продакшна, думаю, рациональней использовать виртуальные машины, т.к. необходимы ресурсы для обработки большого объема данных.
5. Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana - для простоты развертывания и использования - контейнеры или виртуальные машины, но надо учитывать что это ресурсоёмкий кластер.
6. Мониторинг-стек на базе Prometheus и Grafana - подойдет любой вариант реализации, но для обеспечения легкости развертывания и масштабирования я бы предпочел контейнеры или виртуальные машины.
7. MongoDB как основное хранилище данных для Java-приложения - любой из вариантов. Но надо учитывать что для контенера потребуется внешнее хранилище.
8. Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry - Gitlab-сервер можно развернуть как на физическом сервере, так и на виртуальной машине. А вот Docker Registry поставляется как образ контейнера.

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.
- Добавьте ещё один файл в папку ```/data``` на хостовой машине.
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

### Ответ

```bash
root@linux-ubuntu-1:~/virt_03# docker run --name docker-centos -d -it -v ~/virt_03/data:/data centos
3cfa5ab461a91665d81c6ce809e05a04c01d288bcb6332b815110de324d2426c
root@linux-ubuntu-1:~/virt_03# docker run --name docker-debian -d -it -v ~/virt_03/data:/data debian
826fb488bd8cd800f23f94c8b3b7791b5593199dccad1dbe2d60e6bd58f7ea5a
root@linux-ubuntu-1:~/virt_03# docker exec docker-centos touch /data/acdc
root@linux-ubuntu-1:~/virt_03# touch data/metallica
root@linux-ubuntu-1:~/virt_03# docker exec docker-debian ls -l /data/
total 0
-rw-r--r-- 1 root root 0 Jun 30 13:08 acdc
-rw-r--r-- 1 root root 0 Jun 30 13:08 metallica
```
